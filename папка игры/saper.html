<html>
<head>
<style>
body {
font-family: Arial, sans-serif;
background-color: #f0f0f0;
}

h1 {
text-align: center;
color: #333;
}

#board {
width: 300px;
height: 300px;
margin: 0 auto;
border: 2px solid #999;
display: grid;
grid-template-columns: repeat(10, 1fr);
grid-template-rows: repeat(10, 1fr);
}

.cell {
border: 1px solid #ccc;
background-color: #eee;
cursor: pointer;
}

.cell:hover {
background-color: #ddd;
}

.cell.mine {
background-color: #f00;
}

.cell.flag {
background-color: #ff0;
}

.cell.revealed {
background-color: #fff;
cursor: default;
}

.cell.number {
color: #00f;
font-weight: bold;
text-align: center;
line-height: 30px;
}
</style>
</head>
<body>
<h1>–ò–≥—Ä–∞ –°–∞–ø–µ—Ä</h1>
<div id="board"></div>
<script>
// –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–Ω –Ω–∞ –¥–æ—Å–∫–µ
var mineCount = 10;

// –°–æ–∑–¥–∞–µ–º –¥–≤—É–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —è—á–µ–µ–∫
var cells = [];

// –°–æ–∑–¥–∞–µ–º –¥–æ—Å–∫—É –∏–∑ –¥–∏–≤–æ–≤ —Å –∫–ª–∞—Å—Å–æ–º cell
var board = document.getElementById("board");
for (var i = 0; i < 10; i++) {
cells[i] = [];
for (var j = 0; j < 10; j++) {
var cell = document.createElement("div");
cell.className = "cell";
cell.dataset.row = i;
cell.dataset.col = j;
cell.addEventListener("click", handleClick);
cell.addEventListener("contextmenu", handleRightClick);
board.appendChild(cell);
cells[i][j] = cell;
}
}

// –†–∞—Å—Å—Ç–∞–≤–ª—è–µ–º –º–∏–Ω—ã –Ω–∞ –¥–æ—Å–∫–µ —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º
var mines = [];
while (mines.length < mineCount) {
var row = Math.floor(Math.random() * 10);
var col = Math.floor(Math.random() * 10);
var cell = cells[row][col];
if (!cell.classList.contains("mine")) {
cell.classList.add("mine");
mines.push(cell);
}
}

// –î–ª—è –∫–∞–∂–¥–æ–π —è—á–µ–π–∫–∏ –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–Ω –≤ —Å–æ—Å–µ–¥–Ω–∏—Ö —è—á–µ–π–∫–∞—Ö
for (var i = 0; i < cells.length; i++) {
for (var j = 0; j < cells[i].length; j++) {
var cell = cells[i][j];
if (!cell.classList.contains("mine")) {
var count = countMines(i, j);
if (count > 0) {
cell.dataset.count = count;
}
}
}
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ –º–∏–Ω –≤ —Å–æ—Å–µ–¥–Ω–∏—Ö —è—á–µ–π–∫–∞—Ö
function countMines(row, col) {
var count = 0;

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –≤–æ—Å–µ–º—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —è—á–µ–π–∫–∏
for (var i = -1; i <= +1; i++) {
for (var j = -1; j <= +1; j++) {

// –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–∞–º—É —è—á–µ–π–∫—É
if (i == 0 && j == 0) continue;

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥—Ä–∞–Ω–∏—Ü—ã –¥–æ—Å–∫–∏
if (row + i < 0 || row + i >= cells.length) continue;
if (col + j < 0 || col + j >= cells[row].length) continue;

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –º–∏–Ω—ã –≤ —Å–æ—Å–µ–¥–Ω–µ–π —è—á–µ–π–∫–µ
var cell = cells[row + i][col + j];
if (cell.classList.contains("mine")) {
count++;
}
}
}
return count;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–∫–∞ –ø–æ —è—á–µ–π–∫–µ
function handleClick(event) {

// –ü–æ–ª—É—á–∞–µ–º —è—á–µ–π–∫—É –ø–æ –∫–æ—Ç–æ—Ä–æ–π –∫–ª–∏–∫–Ω—É–ª–∏
var cell = event.target;

// –ï—Å–ª–∏ —è—á–µ–π–∫–∞ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–∞ –∏–ª–∏ –ø–æ–º–µ—á–µ–Ω–∞ —Ñ–ª–∞–≥–æ–º, —Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
if (cell.classList.contains("revealed") || cell.classList.contains("flag")) return;

// –ï—Å–ª–∏ —è—á–µ–π–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∏–Ω—É, —Ç–æ –∏–≥—Ä–∞ –ø—Ä–æ–∏–≥—Ä–∞–Ω–∞
if (cell.classList.contains("mine")) {
alert("–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏!");
revealAll();
return;
}

// –û—Ç–∫—Ä—ã–≤–∞–µ–º —è—á–µ–π–∫—É –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —á–∏—Å–ª–æ, –µ—Å–ª–∏ –æ–Ω–æ –µ—Å—Ç—å
cell.classList.add("revealed");
if (cell.dataset.count) {
cell.classList.add("number");
cell.textContent = cell.dataset.count;
} else {
// –ï—Å–ª–∏ —è—á–µ–π–∫–∞ –ø—É—Å—Ç–∞—è, —Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–æ—Å–µ–¥–Ω–∏–µ —è—á–µ–π–∫–∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
var row = parseInt(cell.dataset.row);
var col = parseInt(cell.dataset.col);
for (var i = -1; i <= +1; i++) {
for (var j = -1; j <= +1; j++) {
// –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–∞–º—É —è—á–µ–π–∫—É
if (i == 0 && j == 0) continue;

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥—Ä–∞–Ω–∏—Ü—ã –¥–æ—Å–∫–∏
if (row + i < 0 || row + i >= cells.length) continue;
if (col + j < 0 || col + j >= cells[row].length) continue;

// –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ–º —Å–æ—Å–µ–¥–Ω—é—é —è—á–µ–π–∫—É
var cell = cells[row + i][col + j];
handleClick({ target: cell });
}
}
}

// –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã
if (checkWin()) {
alert("–í—ã –ø–æ–±–µ–¥–∏–ª–∏!");
revealAll();
}
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∞–≤–æ–≥–æ –∫–ª–∏–∫–∞ –ø–æ —è—á–µ–π–∫–µ
function handleRightClick(event) {

// –û—Ç–º–µ–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–ø–æ–∫–∞–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é)
event.preventDefault();

// –ü–æ–ª—É—á–∞–µ–º —è—á–µ–π–∫—É –ø–æ –∫–æ—Ç–æ—Ä–æ–π –∫–ª–∏–∫–Ω—É–ª–∏
var cell = event.target;

// –ï—Å–ª–∏ —è—á–µ–π–∫–∞ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–∞, —Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
if (cell.classList.contains("revealed")) return;

// –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Ñ–ª–∞–≥ –Ω–∞ —è—á–µ–π–∫–µ
cell.classList.toggle("flag");
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ª–æ–≤–∏—è –ø–æ–±–µ–¥—ã
function checkWin() {

// –ò—â–µ–º –∑–∞–∫—Ä—ã—Ç—ã–µ —è—á–µ–π–∫–∏ –±–µ–∑ —Ñ–ª–∞–≥–æ–≤
for (var i = 0; i < cells.length; i++) {
for (var j = 0; j < cells[i].length; j++) {
var cell = cells[i][j];
if (!cell.classList.contains("revealed") && !cell.classList.contains("flag")) {
return false;
}
}
}

// –ï—Å–ª–∏ —Ç–∞–∫–∏—Ö –Ω–µ—Ç, —Ç–æ –∏–≥—Ä–∞ –≤—ã–∏–≥—Ä–∞–Ω–∞
return true;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –≤—Å–µ—Ö —è—á–µ–µ–∫ –Ω–∞ –¥–æ—Å–∫–µ
function revealAll() {

// –£–¥–∞–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π —Å –¥–æ—Å–∫–∏
board.removeEventListener("click", handleClick);
board.removeEventListener("contextmenu", handleRightClick);

// –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —è—á–µ–π–∫–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–∏–Ω—ã –∏ —á–∏—Å–ª–∞
for (var i = 0; i < cells.length; i++) {
for (var j = 0; j < cells[i].length; j++) {
var cell = cells[i][j];
cell.classList.add("revealed");
if (cell.classList.contains("mine")) {
cell.textContent = "üí£";
}
if (cell.dataset.count) {
cell.classList.add("number");
cell.textContent = cell.dataset.count;
}
}
}
}
</script>
</body>
</html>